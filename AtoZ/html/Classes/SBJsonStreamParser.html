<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>SBJsonStreamParser Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">AtoZ.Framework </a></h1>
				<a id="developerHome" href="../index.html">mrgray.com</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">SBJsonStreamParser Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/delegate">&nbsp;&nbsp;&nbsp;&nbsp;delegate</option>
	
	<option value="//api/name/error">&nbsp;&nbsp;&nbsp;&nbsp;error</option>
	
	<option value="//api/name/levelsToSkip">&nbsp;&nbsp;&nbsp;&nbsp;levelsToSkip</option>
	
	<option value="//api/name/maxDepth">&nbsp;&nbsp;&nbsp;&nbsp;maxDepth</option>
	
	<option value="//api/name/supportMultipleDocuments">&nbsp;&nbsp;&nbsp;&nbsp;supportMultipleDocuments</option>
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/parse:">&nbsp;&nbsp;&nbsp;&nbsp;- parse:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/delegate">delegate</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/error">error</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/levelsToSkip">levelsToSkip</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/maxDepth">maxDepth</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/supportMultipleDocuments">supportMultipleDocuments</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/parse:">parse:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="SBJsonStreamParser Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">SBJsonStreamParser Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">SBJsonStreamParser.h</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>@brief Parse a stream of JSON data.</p>

<p>Using this class directly you can reduce the apparent latency for each
download/parse cycle of documents over a slow connection. You can start
parsing <em>and return chunks of the parsed document</em> before the entire
document is downloaded. Using this class is also useful to parse huge
documents on disk bit by bit so you don&rsquo;t have to keep them all in memory.</p>

<p>The default behaviour is that the <a href="#//api/name/delegate">delegate</a> only receives one call from
either the -parser:foundArray: or -parser:foundObject: method when the
document is fully parsed. However, if your inputs contains multiple JSON
documents and you set the parser&rsquo;s <a href="#//api/name/supportMultipleDocuments">supportMultipleDocuments</a> property to YES
you will get one call for each full method.</p>

<p>@code
SBJsonStreamParser *parser = [[[SBJsonStreamParser alloc] init] autorelease];
parser.<a href="#//api/name/delegate">delegate</a> = self;
parser.<a href="#//api/name/supportMultipleDocuments">supportMultipleDocuments</a> = YES;</p>

<p>// Note that this input contains multiple top-level JSON documents
NSData *json = [@&ldquo;[]{}[]{}&rdquo; dataWithEncoding:NSUTF8StringEncoding];
[parser parse:data];
@endcode</p>

<p>In the above example @p self will have the following sequence of methods called on it:</p>

<p>@li -parser:foundArray:
@li -parser:foundObject:
@li -parser:foundArray:
@li -parser:foundObject:</p>

<p>Often you won&rsquo;t have control over the input you&rsquo;re parsing, so can&rsquo;t make use of
this feature. But, all is not lost: this class will let you get the same effect by
allowing you to skip one or more of the outer enclosing objects. Thus, the next
example results in the same sequence of -parser:foundArray: / -parser:foundObject:
being called on your <a href="#//api/name/delegate">delegate</a>.</p>

<p>@code
SBJsonStreamParser *parser = [[[SBJsonStreamParser alloc] init] autorelease];
parser.<a href="#//api/name/delegate">delegate</a> = self;
parser.<a href="#//api/name/levelsToSkip">levelsToSkip</a> = 1;</p>

<p>// Note that this input contains A SINGLE top-level document
NSData *json = [@&ldquo;[[],{},[],{}]&rdquo; dataWithEncoding:NSUTF8StringEncoding];
[parser parse:data];
@endcode</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/levelsToSkip">&nbsp;&nbsp;levelsToSkip</a></code>
		<span class="tooltip"><p>@brief How many levels to skip</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/supportMultipleDocuments">&nbsp;&nbsp;supportMultipleDocuments</a></code>
		<span class="tooltip"><p>@brief Expect multiple documents separated by whitespace</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/delegate">&nbsp;&nbsp;delegate</a></code>
		<span class="tooltip"><p>@brief Delegate to receive messages</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/maxDepth">&nbsp;&nbsp;maxDepth</a></code>
		<span class="tooltip"><p>@brief The max parse depth</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/error">&nbsp;&nbsp;error</a></code>
		<span class="tooltip"><p>Holds the error after SBJsonStreamParserError was returned</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/parse:">&ndash;&nbsp;parse:</a></code>
		<span class="tooltip"><p>@brief Parse some JSON</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/delegate" title="delegate"></a>
	<h3 class="subsubtitle method-title">delegate</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>@brief Delegate to receive messages</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (assign) id&lt;SBJsonStreamParserDelegate&gt; delegate</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>@brief Delegate to receive messages</p>

<p>The object set here receives a series of messages as the parser breaks down the JSON stream
into valid tokens.</p>

<p>@note
Usually this should be an instance of SBJsonStreamParser, but you can
substitute your own implementation of the <a href="../Protocols/SBJsonStreamParserDelegate.html">SBJsonStreamParserDelegate</a> protocol if you need to.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/error" title="error"></a>
	<h3 class="subsubtitle method-title">error</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Holds the error after SBJsonStreamParserError was returned</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (copy) NSString *error</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Holds the error after SBJsonStreamParserError was returned</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/levelsToSkip" title="levelsToSkip"></a>
	<h3 class="subsubtitle method-title">levelsToSkip</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>@brief How many levels to skip</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property NSUInteger levelsToSkip</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>@brief How many levels to skip</p>

<p>This is useful for parsing huge JSON documents, or documents coming in over a very slow link.</p>

<p>If you set this to N it will skip the outer N levels and call the -parser:foundArray:
or -parser:foundObject: methods for each of the inner objects, as appropriate.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/maxDepth" title="maxDepth"></a>
	<h3 class="subsubtitle method-title">maxDepth</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>@brief The max parse depth</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property NSUInteger maxDepth</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>@brief The max parse depth</p>

<p>If the input is nested deeper than this the parser will halt parsing and return an <a href="#//api/name/error">error</a>.</p>

<p>Defaults to 32.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/supportMultipleDocuments" title="supportMultipleDocuments"></a>
	<h3 class="subsubtitle method-title">supportMultipleDocuments</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>@brief Expect multiple documents separated by whitespace</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property BOOL supportMultipleDocuments</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>@brief Expect multiple documents separated by whitespace</p>

<p>Normally the @p <a href="#//api/name/parse:">parse:</a> method returns SBJsonStreamParserComplete when it&rsquo;s found a complete JSON document.
Attempting to parse any more data at that point is considered an <a href="#//api/name/error">error</a>. (&ldquo;Garbage after JSON&rdquo;.)</p>

<p>If you set this property to true the parser will never return SBJsonStreamParserComplete. Rather,
once an object is completed it will expect another object to immediately follow, separated
only by (optional) whitespace.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/parse:" title="parse:"></a>
	<h3 class="subsubtitle method-title">parse:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>@brief Parse some JSON</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (SBJsonStreamParserStatus)parse:(NSData *)<em>data</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>data</em></dt>
			<dd><p>An NSData object containing the next chunk of JSON</p>

<p>@return
@li SBJsonStreamParserComplete if a full document was found
@li SBJsonStreamParserWaitingForData if a partial document was found and more data is required to complete it
@li SBJsonStreamParserError if an <a href="#//api/name/error">error</a> occured. (See the <a href="#//api/name/error">error</a> property for details in this case.)</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>@brief Parse some JSON</p>

<p>The JSON is assumed to be UTF8 encoded. This can be a full JSON document, or a part of one.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2012 mrgray.com. All rights reserved. (Last updated: 2012-09-15)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
		</script>
	</body>
</html>